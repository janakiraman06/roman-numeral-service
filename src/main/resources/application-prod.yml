# ============================================
# Production Profile Configuration
# ============================================
# Activated with: --spring.profiles.active=prod
# or SPRING_PROFILES_ACTIVE=prod
#
# Purpose: Production-ready settings with security and minimal logging
# ============================================

# Production-specific overrides
app:
  rate-limiting:
    enabled: true
    requests-per-minute: 100  # Strict rate limiting
  
  api-security:
    enabled: true  # Require API key for all requests

# Database (configured via environment variables in production)
# SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, SPRING_DATASOURCE_PASSWORD
spring:
  jpa:
    hibernate:
      ddl-auto: update  # Auto-create tables if not exist (use Flyway for real prod)
    show-sql: false
    # Defer datasource initialization until after Hibernate
    defer-datasource-initialization: true
  datasource:
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      # Retry connection on startup (for container orchestration)
      initialization-fail-timeout: 30000
      connection-timeout: 30000

# Minimal logging for performance
logging:
  level:
    com.adobe.romannumeral: INFO
    org.springframework: WARN
    org.hibernate: WARN
    root: WARN

# Disable Swagger UI for security
springdoc:
  swagger-ui:
    enabled: false
  api-docs:
    enabled: false

# Limited actuator endpoints for security
management:
  endpoints:
    web:
      exposure:
        include: health,prometheus,info
  endpoint:
    health:
      show-details: when_authorized

# Minimal error details for security
server:
  error:
    include-message: always
    include-stacktrace: never
    include-exception: false

